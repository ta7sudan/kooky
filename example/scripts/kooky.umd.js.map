{"version":3,"file":"kooky.umd.js","sources":["kooky.js"],"sourcesContent":["/* global DEBUG */\nimport { Omit } from 'type-fest';\n\nconst dec = decodeURIComponent,\n\tenc = encodeURIComponent,\n\tdecode = (s: string): string => s.replace(/(%[0-9A-Z]{2})+/g, dec);\n\ninterface CookieOptions {\n\tpath?: string;\n\tsecure?: boolean;\n\tdomain?: string;\n\texpires?: Date | number;\n}\n\nfunction setCookie(key: string, value: string, {expires, domain, secure, path = '/'}: CookieOptions = {} as CookieOptions): string {\n\tif (typeof value !== 'string') {\n\t\t// 这里是基本类型, 可以重新赋值\n\t\t// tslint:disable-next-line\n\t\tvalue = String(value);\n\t}\n\t// 这里是基本类型, 可以重新赋值\n\t// tslint:disable-next-line\n\tkey = enc(\n\t\tkey.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, dec)\n\t);\n\t// 这里是基本类型, 可以重新赋值\n\t// tslint:disable-next-line\n\tvalue = enc(\n\t\tvalue.replace(/%(23|24|26|2B|5E|60|7C)/g, dec).replace(/[\\\\]/g, escape)\n\t);\n\tlet text = `${key}=${value}`;\n\ttext += `; path=${path.split(';')[0]}`;\n\t// 这里是基本类型, 可以重新赋值\n\t// tslint:disable-next-line\n\ttypeof expires === 'number' && (expires = new Date(Date.now() + expires * 36e5));\n\t// js中toUTCString和toGMTString是一样的\n\t// https://segmentfault.com/a/1190000006798626\n\texpires instanceof Date && (text += `; expires=${expires.toUTCString()}`);\n\ttypeof domain === 'string' && (text += `; domain=${domain.split(';')[0]}`);\n\tsecure && (text += '; secure');\n\treturn (document.cookie = text);\n}\n\nfunction getCookie(key: string): string | Array<string> | null {\n\tconst cookies = document.cookie ? document.cookie.split('; ') : [],\n\t\trst: Array<string> = [];\n\tfor (let i = 0, len = cookies.length; i < len; ++i) {\n\t\tconst part = cookies[i].split('='),\n\t\t\tname = decode(part[0]),\n\t\t\tvalue = decode(part.slice(1).join('='));\n\t\tname === key && rst.push(value);\n\t}\n\treturn rst.length ? (rst.length === 1 ? rst[0] : rst) : null;\n}\n\nfunction removeCookie(key: string, options: Omit<CookieOptions, 'expires' | 'secure'>): void {\n\tsetCookie(key, '', {\n\t\t...options,\n\t\texpires: -1\n\t});\n}\n\nexport { setCookie, getCookie, removeCookie };\n"],"names":["dec","decodeURIComponent","enc","encodeURIComponent","decode","s","replace","setCookie","key","value","expires","domain","secure","path","String","escape","text","split","Date","now","toUTCString","document","cookie","getCookie","cookies","rst","i","len","length","part","name","slice","join","push","removeCookie","options"],"mappings":";;;;;;CAGA,IAAMA,GAAG,GAAGC,kBAAZ;CAAA,IACCC,GAAG,GAAGC,kBADP;CAAA,IAECC,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD;CAAA,SAAuBA,CAAC,CAACC,OAAF,CAAU,kBAAV,EAA8BN,GAA9B,CAAvB;CAAA,CAFV;;CAWA,SAASO,SAAT,CAAmBC,GAAnB,EAAgCC,KAAhC;iCAAsG;OAAtDC,eAAAA;OAASC,cAAAA;OAAQC,cAAAA;wBAAQC;OAAAA,8BAAO;;CAC/E,MAAI,OAAOJ,KAAP,KAAiB,QAArB,EAA+B;CAC9B;CACA;CACAA,IAAAA,KAAK,GAAGK,MAAM,CAACL,KAAD,CAAd;CACA;CAED;;;CACAD,EAAAA,GAAG,GAAGN,GAAG,CACRM,GAAG,CAACF,OAAJ,CAAY,2DAAZ,EAAyEN,GAAzE,CADQ,CAAT;CAIA;;CACAS,EAAAA,KAAK,GAAGP,GAAG,CACVO,KAAK,CAACH,OAAN,CAAc,0BAAd,EAA0CN,GAA1C,EAA+CM,OAA/C,CAAuD,OAAvD,EAAgES,MAAhE,CADU,CAAX;CAGA,MAAIC,IAAI,GAAMR,GAAN,SAAaC,KAArB;CACAO,EAAAA,IAAI,gBAAcH,IAAI,CAACI,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAlB;CAEA;;CACA,SAAOP,OAAP,KAAmB,QAAnB,KAAgCA,OAAO,GAAG,IAAIQ,IAAJ,CAASA,IAAI,CAACC,GAAL,KAAaT,OAAO,GAAG,IAAhC,CAA1C;CAEA;;CACAA,EAAAA,OAAO,YAAYQ,IAAnB,KAA4BF,IAAI,mBAAiBN,OAAO,CAACU,WAAR,EAAjD;CACA,SAAOT,MAAP,KAAkB,QAAlB,KAA+BK,IAAI,kBAAgBL,MAAM,CAACM,KAAP,CAAa,GAAb,EAAkB,CAAlB,CAAnD;CACAL,EAAAA,MAAM,KAAKI,IAAI,IAAI,UAAb,CAAN;CACA,SAAQK,QAAQ,CAACC,MAAT,GAAkBN,IAA1B;CACA;;CAED,SAASO,SAAT,CAAmBf,GAAnB;CACC,MAAMgB,OAAO,GAAGH,QAAQ,CAACC,MAAT,GAAkBD,QAAQ,CAACC,MAAT,CAAgBL,KAAhB,CAAsB,IAAtB,CAAlB,GAAgD,EAAhE;CAAA,MACCQ,GAAG,GAAkB,EADtB;;CAEA,OAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGH,OAAO,CAACI,MAA9B,EAAsCF,CAAC,GAAGC,GAA1C,EAA+C,EAAED,CAAjD,EAAoD;CACnD,QAAMG,IAAI,GAAGL,OAAO,CAACE,CAAD,CAAP,CAAWT,KAAX,CAAiB,GAAjB,CAAb;CAAA,QACCa,IAAI,GAAG1B,MAAM,CAACyB,IAAI,CAAC,CAAD,CAAL,CADd;CAAA,QAECpB,KAAK,GAAGL,MAAM,CAACyB,IAAI,CAACE,KAAL,CAAW,CAAX,EAAcC,IAAd,CAAmB,GAAnB,CAAD,CAFf;CAGAF,IAAAA,IAAI,KAAKtB,GAAT,IAAgBiB,GAAG,CAACQ,IAAJ,CAASxB,KAAT,CAAhB;CACA;;CACD,SAAOgB,GAAG,CAACG,MAAJ,GAAcH,GAAG,CAACG,MAAJ,KAAe,CAAf,GAAmBH,GAAG,CAAC,CAAD,CAAtB,GAA4BA,GAA1C,GAAiD,IAAxD;CACA;;CAED,SAASS,YAAT,CAAsB1B,GAAtB,EAAmC2B,OAAnC;CACC5B,EAAAA,SAAS,CAACC,GAAD,EAAM,EAAN,oBACL2B;CACHzB,IAAAA,OAAO,EAAE,CAAC;KAFF,CAAT;CAIA;;;;;;;;;;;;;;"}