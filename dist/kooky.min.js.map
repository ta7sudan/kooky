{"version":3,"file":"kooky.min.js","sources":["kooky.js"],"sourcesContent":["/* global DEBUG */\nconst dec = decodeURIComponent,\n\tenc = encodeURIComponent,\n\tdecode = (s: string): string => s.replace(/(%[0-9A-Z]{2})+/g, dec);\n\ninterface CookieOptions {\n\tpath?: string;\n\tsecure?: boolean;\n\tdomain?: string;\n\texpires?: Date | number;\n}\n\nfunction setCookie(key: string, value: string, {expires, domain, secure, path = '/'}: CookieOptions = {} as CookieOptions): string {\n\tif (typeof value !== 'string') {\n\t\t// 这里是基本类型, 可以重新赋值\n\t\t// tslint:disable-next-line\n\t\tvalue = String(value);\n\t}\n\t// 这里是基本类型, 可以重新赋值\n\t// tslint:disable-next-line\n\tkey = enc(\n\t\tkey.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, dec)\n\t);\n\t// 这里是基本类型, 可以重新赋值\n\t// tslint:disable-next-line\n\tvalue = enc(\n\t\tvalue.replace(/%(23|24|26|2B|5E|60|7C)/g, dec).replace(/[\\\\]/g, escape)\n\t);\n\tlet text = `${key}=${value}`;\n\ttext += `; path=${path.split(';')[0]}`;\n\t// 这里是基本类型, 可以重新赋值\n\t// tslint:disable-next-line\n\ttypeof expires === 'number' && (expires = new Date(Date.now() + expires * 36e5));\n\t// js中toUTCString和toGMTString是一样的\n\t// https://segmentfault.com/a/1190000006798626\n\texpires instanceof Date && (text += `; expires=${expires.toUTCString()}`);\n\ttypeof domain === 'string' && (text += `; domain=${domain.split(';')[0]}`);\n\tsecure && (text += '; secure');\n\treturn (document.cookie = text);\n}\n\nfunction getCookie(key: string): string | Array<string> | null {\n\tconst cookies = document.cookie ? document.cookie.split('; ') : [],\n\t\trst: Array<string> = [];\n\tfor (let i = 0, len = cookies.length; i < len; ++i) {\n\t\tconst part = cookies[i].split('='),\n\t\t\tname = decode(part[0]),\n\t\t\tvalue = decode(part.slice(1).join('='));\n\t\tname === key && rst.push(value);\n\t}\n\treturn rst.length ? (rst.length === 1 ? rst[0] : rst) : null;\n}\n\nfunction removeCookie(key: string, options: Omit<CookieOptions, 'expires' | 'secure'>): void {\n\tsetCookie(key, '', {\n\t\t...options,\n\t\texpires: -1\n\t});\n}\n\nexport { setCookie, getCookie, removeCookie };\n"],"names":["dec","decodeURIComponent","enc","encodeURIComponent","decode","s","replace","setCookie","key","value","expires","domain","secure","path","String","text","escape","split","Date","now","toUTCString","document","cookie","cookies","rst","i","len","length","part","name","slice","join","push","options"],"mappings":";;;;;;iZACA,IAAMA,EAAMC,mBACXC,EAAMC,mBACNC,EAAS,SAACC,UAAsBA,EAAEC,QAAQ,mBAAoBN,IAS/D,SAASO,EAAUC,EAAaC,sBAAsE,KAAtDC,IAAAA,QAASC,IAAAA,OAAQC,IAAAA,WAAQC,KAAAA,aAAO,MAC1D,iBAAVJ,IAGVA,EAAQK,OAAOL,QAYZM,GARJP,EAAMN,EACLM,EAAIF,QAAQ,4DAA6DN,UAI1ES,EAAQP,EACPO,EAAMH,QAAQ,2BAA4BN,GAAKM,QAAQ,QAASU,iBAGjED,aAAkBF,EAAKI,MAAM,KAAK,GAGf,iBAAZP,IAAyBA,EAAU,IAAIQ,KAAKA,KAAKC,MAAkB,KAAVT,IAGhEA,aAAmBQ,OAASH,gBAAqBL,EAAQU,eACvC,iBAAXT,IAAwBI,eAAoBJ,EAAOM,MAAM,KAAK,IACrEL,IAAWG,GAAQ,YACXM,SAASC,OAASP,cAG3B,SAAmBP,WACZe,EAAUF,SAASC,OAASD,SAASC,OAAOL,MAAM,MAAQ,GAC/DO,EAAqB,GACbC,EAAI,EAAGC,EAAMH,EAAQI,OAAQF,EAAIC,IAAOD,EAAG,KAC7CG,EAAOL,EAAQE,GAAGR,MAAM,KAC7BY,EAAOzB,EAAOwB,EAAK,IACnBnB,EAAQL,EAAOwB,EAAKE,MAAM,GAAGC,KAAK,MACnCF,IAASrB,GAAOgB,EAAIQ,KAAKvB,UAEnBe,EAAIG,OAAyB,IAAfH,EAAIG,OAAeH,EAAI,GAAKA,EAAO,qBAGzD,SAAsBhB,EAAayB,GAClC1B,EAAUC,EAAK,QACXyB,GACHvB,SAAU"}