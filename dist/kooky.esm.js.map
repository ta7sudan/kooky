{"version":3,"file":"kooky.esm.js","sources":["../src/index.js"],"sourcesContent":["/* global DEBUG */\nconst dec = decodeURIComponent,\n\tenc = encodeURIComponent,\n\tdecode = s => s.replace(/(%[0-9A-Z]{2})+/g, dec);\n\nfunction setCookie(key, value, {expires, domain, secure, path = '/'} = {}) {\n\tkey = enc(\n\t\tkey.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, dec)\n\t);\n\tvalue = enc(\n\t\tvalue.replace(/%(23|24|26|2B|5E|60|7C)/g, dec).replace(/[\\\\]/g, escape)\n\t);\n\tlet text = `${key}=${value}`;\n\ttext += `; path=${path.split(';')[0]}`;\n\ttypeof expires === 'number' && (expires = new Date(Date.now() + expires * 36e5));\n\t// js中toUTCString和toGMTString是一样的\n\t// https://segmentfault.com/a/1190000006798626\n\texpires instanceof Date && (text += `; expires=${expires.toUTCString()}`);\n\ttypeof domain === 'string' && (text += `; domain=${domain.split(';')[0]}`);\n\tsecure && (text += '; secure');\n\treturn (document.cookie = text);\n}\n\nfunction getCookie(key) {\n\tconst cookies = document.cookie ? document.cookie.split('; ') : [],\n\t\trst = [];\n\tfor (var i = 0, len = cookies.length; i < len; ++i) {\n\t\tvar part = cookies[i].split('='),\n\t\t\tname = decode(part[0]),\n\t\t\tvalue = decode(part.slice(1).join('='));\n\t\tname === key && rst.push(value);\n\t}\n\treturn rst.length ? (rst.length === 1 ? rst[0] : rst) : null;\n}\n\nfunction removeCookie(key, options) {\n\tsetCookie(key, {\n\t\t...options,\n\t\texpires: -1\n\t});\n}\n\nexport {setCookie, getCookie, removeCookie};\n"],"names":["dec","decodeURIComponent","enc","encodeURIComponent","decode","s","replace","setCookie","key","value","expires","domain","secure","path","escape","text","split","Date","now","toUTCString","document","cookie","getCookie","cookies","rst","i","len","length","part","name","slice","join","push","removeCookie","options"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA,IAAMA,GAAG,GAAGC,kBAAZ;IACCC,GAAG,GAAGC,kBADP;IAECC,MAAM,GAAG,SAATA,MAAS,CAAAC,CAAC;SAAIA,CAAC,CAACC,OAAF,CAAU,kBAAV,EAA8BN,GAA9B,CAAJ;CAFX;;AAIA,SAASO,SAAT,CAAmBC,GAAnB,EAAwBC,KAAxB,SAA2E;gCAAJ,EAAI;MAA3CC,OAA2C,QAA3CA,OAA2C;MAAlCC,MAAkC,QAAlCA,MAAkC;MAA1BC,MAA0B,QAA1BA,MAA0B;uBAAlBC,IAAkB;MAAlBA,IAAkB,0BAAX,GAAW;;EAC1EL,GAAG,GAAGN,GAAG,CACRM,GAAG,CAACF,OAAJ,CAAY,2DAAZ,EAAyEN,GAAzE,CADQ,CAAT;EAGAS,KAAK,GAAGP,GAAG,CACVO,KAAK,CAACH,OAAN,CAAc,0BAAd,EAA0CN,GAA1C,EAA+CM,OAA/C,CAAuD,OAAvD,EAAgEQ,MAAhE,CADU,CAAX;MAGIC,IAAI,GAAMP,GAAN,SAAaC,KAArB;EACAM,IAAI,gBAAcF,IAAI,CAACG,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAlB;SACON,OAAP,KAAmB,QAAnB,KAAgCA,OAAO,GAAG,IAAIO,IAAJ,CAASA,IAAI,CAACC,GAAL,KAAaR,OAAO,GAAG,IAAhC,CAA1C,EAT0E;;;EAY1EA,OAAO,YAAYO,IAAnB,KAA4BF,IAAI,mBAAiBL,OAAO,CAACS,WAAR,EAAjD;SACOR,MAAP,KAAkB,QAAlB,KAA+BI,IAAI,kBAAgBJ,MAAM,CAACK,KAAP,CAAa,GAAb,EAAkB,CAAlB,CAAnD;EACAJ,MAAM,KAAKG,IAAI,IAAI,UAAb,CAAN;SACQK,QAAQ,CAACC,MAAT,GAAkBN,IAA1B;;;AAGD,SAASO,SAAT,CAAmBd,GAAnB,EAAwB;MACjBe,OAAO,GAAGH,QAAQ,CAACC,MAAT,GAAkBD,QAAQ,CAACC,MAAT,CAAgBL,KAAhB,CAAsB,IAAtB,CAAlB,GAAgD,EAAhE;MACCQ,GAAG,GAAG,EADP;;OAEK,IAAIC,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGH,OAAO,CAACI,MAA9B,EAAsCF,CAAC,GAAGC,GAA1C,EAA+C,EAAED,CAAjD,EAAoD;QAC/CG,IAAI,GAAGL,OAAO,CAACE,CAAD,CAAP,CAAWT,KAAX,CAAiB,GAAjB,CAAX;QACCa,IAAI,GAAGzB,MAAM,CAACwB,IAAI,CAAC,CAAD,CAAL,CADd;QAECnB,KAAK,GAAGL,MAAM,CAACwB,IAAI,CAACE,KAAL,CAAW,CAAX,EAAcC,IAAd,CAAmB,GAAnB,CAAD,CAFf;IAGAF,IAAI,KAAKrB,GAAT,IAAgBgB,GAAG,CAACQ,IAAJ,CAASvB,KAAT,CAAhB;;;SAEMe,GAAG,CAACG,MAAJ,GAAcH,GAAG,CAACG,MAAJ,KAAe,CAAf,GAAmBH,GAAG,CAAC,CAAD,CAAtB,GAA4BA,GAA1C,GAAiD,IAAxD;;;AAGD,SAASS,YAAT,CAAsBzB,GAAtB,EAA2B0B,OAA3B,EAAoC;EACnC3B,SAAS,CAACC,GAAD,eACL0B,OADK;IAERxB,OAAO,EAAE,CAAC;KAFX;;;;;"}